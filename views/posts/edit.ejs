<% layout('layouts/boilerplate') -%>
<div class="jumbotron jumbotron-fluid page__header">
  <div class="container">
    <div class="page__header--text-box">
      <h1 class="display-4 heading-primary page__header--heading color-light">Edit Post</h1>
      <p class="lead heading-primary--sub">Edit <%= post.title  %> Post.</p>
    </div>
  </div>
</div>

<section id="editPost">
	<div class="container contact">
		<div class="row">
			<div class="col-md-8 offset-2">
				<form action="/posts/<%= post.id %>?_method=PUT" method="POST" id="postEditForm" enctype="multipart/form-data">
					<div class="form-group">
						<label for="title" class="contact__label">Title</label>
						<input type="text" id="title" class="form-control contact__input" name="post[title]" placeholder="Title" value="<%= post.title  %>">
					</div>
					<div class="form-group">
						<label for="imageUpload" class="contact__label">Image</label>
						<input type="file" id="imageUpload" class="form-control contact__input" accept="images/*" name="images" multiple/>
						<div>
							<% post.images.forEach(function(image, i) { %>
								<img src="<%= image.url %>" width="80px" />
								<label for="image<%= i %>">Delete</label>
								<input type="checkbox" name="deleteImages[]" class="imageDeleteCheckbox" id="image<%= i %>" value="<%= image.public_id %>">
							<% }); %>
						</div>
					</div>
					<div class="form-group">
						<label for="description" class="contact__label">News Content</label>
						<textarea name="post[description]" id="description" class="form-control contact__textarea" rows="6"><%= post.description  %></textarea>
					</div>
					<div class="form-group">
						<label for="main" class="contact__label">Is Main Post?</label>
						<select
							name="post[mainPost]"
							id="main"
							class="form-control contact__input">
							<option selected value="<%= post.mainPost %>"><%= post.mainPost %></option>
							<option value="true">Yes</option>
							<option value="false">No</option>
						</select>
					</div>
					<div class="form-group">
						<label for="featured" class="contact__label">Is Featured Post?</label>
						<select
							name="post[featuredPost]"
							id="featured"
							class="form-control contact__input">
							<option selected value="<%= post.featuredPost %>"><%= post.featuredPost %></option>
							<option value="true">Yes</option>
							<option value="false">No</option>
						</select>
					</div>
					<div class="form-group">
						<button type="submit" class="contact__btn">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>

<script src="/javascripts/post-edit.js"></script>